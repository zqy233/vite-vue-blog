# create-vite 创建项目

## 安装

```sh
# npm
npm init vite
# yarn
yarn create vite
```

这跟@vue-cli 有了明显区别，不需要安装全局的脚手架命令

原理在于：npm init \<initializer>命令将使用 npx 安装名为 create-\<initializer> 的 npm 包，将，然后执行其 package.json 中 bin 属性对应的脚本，所以该命令实际上是使用 npx 运行 [create-vite](https://www.npmjs.com/package/create-vite) 这个 npm 包，从而下载vite项目模板

npm init 命令相对应的一些示例：

| 命令              | 等同                |
| ----------------- | ------------------- |
| npm init foo      | npx create-foo      |
| npm init @usr     | npx @usr/create     |
| npm init @usr/foo | npx @usr/create-foo |

> 另外，取自 [create-vite](https://www.npmjs.com/package/create-vite) 官方文档：

> 兼容性说明: Vite 要求 Node.js 版本 >=12.2.0，一些模板的正常使用还需要更高的 Node.js 版本, 所以如果您在 node 使用过程中产生了相应警告，请升级

直接创建模板

```sh
# npm 6.x
npm create vite vue-project-name --template vue
# npm 7+, extra double-dash is needed:
npm create vite vue-project-name -- --template vue
# yarn
yarn create vite vue-project-name --template vue
# pnpm
pnpm create vite vue-project-name -- --template vue
```

创建支持typescript的模板

```sh
# npm 6.x
npm create vite vue-project-name --template vue-ts
# npm 7+, extra double-dash is needed:
npm create vite vue-project-name -- --template vue-ts
# yarn
yarn create vite vue-project-name --template vue-ts
# pnpm
pnpm create vite vue-project-name -- --template vue-ts
```

跟 vue-cli 不同的，需要进入目录后自行下载依赖

```sh
# 进入项目目录
cd vue-project-name
# 使用vscode打开项目
code ./
# yarn
yarn
# 运行项目
npm run dev
```

## vite中图片路径

### 1.使用绝对路径或相对路径

```html
<img src="src/assets/img"/>
```

```html
<img src="../../assets/img"/>
```

### 2.动态绑定路径

因为vite中没有require，动态绑定路径可以使用vite特定的文件系统，main.ts中定义相应全局函数

```ts
<template><img :src="requireImg('logo.png')" /></template>

<script lang="ts" setup>
const requireImg = (name: string) => {
  const path = `/src/assets/${name}`
  const modules = import.meta.globEager("/src/assets/*")
  return modules[path].default
}
</script>
```

