# uniCloud

uniCloud是由DCloud联合阿里云，腾讯云推出的，基于serverless的、跨全端、用js开发服务器的云产品

- 免运维，更省心
- 服务器成本更低
- 轻松上手，上手快
- 开发效率加倍提升

## 登录web控制台

https://unicloud.dcloud.net.cn/注册登录，创建一个服务空间

![image-20220504234929908](./imgs/image-20220504234929908.png)

## 创建使用uniCloud的项目

文件>新建>项目>勾选启动unicloud>选择腾讯云或阿里云

## 已有项目添加uniCloud

右击项目>创建云开发环境>选择腾讯云或阿里云

## 关联云服务

现在项目拥有一个`uniCloud`文件夹，右击该文件夹关联云服务空间或项目，选择之前创建的服务空间

`uniCloud`文件夹下有两个文件夹

- `cloudfunctions`
- `database`

右击`cloudfunctions`,新建云函数/云对象

例如，新建`col`云对象，该云对象文件夹下的`index.obj.js`中，添加代码如下

```js
module.exports = {
  sayHello() {
    return {
      code: 0,
      data: "hello"
    }
  }
}
```

前端vue文件中调用`col`云对象

```vue
<template>
  <view class="content">
    <button @click="callco">请求服务器</button>
  </view>
</template>

<script>
  export default {
    methods: {
      async callco() {
        const co1 = uniCloud.importObject("col")
        let res = await co1.sayHello()
        // 快捷键ualert
        uni.showModal({
          content: JSON.stringify(res),
          showCancel: false
        })
        // 弹框显示：{ code: 0, data: "hello" }
      }
    }
  }
</script>
```

## 客户端向服务端传递参数

云函数`index.obj.js`

```js
module.exports = {
  sayHello(text) {
    return {
      code: 0,
      data: text
    }
  }
}
```

前端vue文件中调用云对象

```vue
<template>
  <view class="content">
    <button @click="callco">请求服务器</button>
  </view>
</template>

<script>
  export default {
    methods: {
      async callco() {
        const co1 = uniCloud.importObject("col")
        let res = await co1.sayHello("hello world")
        // 快捷键ualert
        uni.showModal({
          content: JSON.stringify(res),
          showCancel: false
        })
        // 弹框显示：{ code: 0, data: "hello world" }
      }
    }
  }
</script>
```

## 连接云端云函数

上方示例是连接本地项目中云函数

![image-20220505000348511](./imgs/image-20220505000348511.png)

连接本地项目中云函数只用于`开发时使用`，方便快速开发调试，打包上线则必须使用云端云函数

那么如何上传云函数至云端呢？

### 上传单个云对象

右击该云对象文件夹，选择`上传部署`

### 上传所有云对象

右击`cloudfunctions`文件夹，选择`上传所有云函数、公共模块及actions`

上传成功后则可以正常使用云端云函数了

